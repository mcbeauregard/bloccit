Michelles-MacBook-Pro:bloccit michellebeauregard$ npm test

> bloccit@1.0.0 test /Users/michellebeauregard/Desktop/Sites/bloc/bloccit
> export NODE_ENV=test&& jasmine

DEPRECATION: Setting throwOnExpectationFailure directly on Env is deprecated, please use the oneFailurePerSpec option in `configure`
DEPRECATION: Setting randomizeTests directly is deprecated, please use the random option in `configure`
Started
server is listening for requests on port 3000
FTypeError: Cannot read property 'title' of null
    at Post.findOne.then (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/spec/integration/posts_spec.js:76:25)
    at tryCatcher (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:512:31)
    at Promise._settlePromise (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:569:18)
    at Promise._settlePromise0 (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:614:10)
    at Promise._settlePromises (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:694:18)
    at _drainQueueStep (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:138:12)
    at _drainQueue (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:131:9)
    at Async._drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:147:5)
    at Immediate.Async.drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:17:14)
    at runCallback (timers.js:810:20)
    at tryOnImmediate (timers.js:768:5)
    at processImmediate [as _immediateCallback] (timers.js:745:5)
F..express deprecated res.redirect(url, status): Use res.redirect(status, url) instead src/controllers/postController.js:69:21
FFFF..........F..F..............

Failures:
1) routes : posts GET /topics/:topicId/posts/new should render a new post form
  Message:
    Expected '<!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="utf-8">
    <title>Error</title>
    </head>
    <body>
    <pre>Cannot GET /posts</pre>
    </body>
    </html>
    ' to contain 'New Post'.
  Stack:
    Error: Expected '<!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="utf-8">
    <title>Error</title>
    </head>
    <body>
    <pre>Cannot GET /posts</pre>
    </body>
    </html>
    ' to contain 'New Post'.
        at <Jasmine>
        at Request.request.get [as _callback] (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/spec/integration/posts_spec.js:54:22)
        at Request.self.callback (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:186:22)
        at emitTwo (events.js:126:13)
        at Request.emit (events.js:214:7)
        at Request.<anonymous> (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:1163:10)
        at emitOne (events.js:116:13)
        at Request.emit (events.js:211:7)
        at IncomingMessage.<anonymous> (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:1085:12)
        at Object.onceWrapper (events.js:313:30)
        at emitNone (events.js:111:20)
        at IncomingMessage.emit (events.js:208:7)
        at endReadableNT (_stream_readable.js:1064:12)
        at _combinedTickCallback (internal/process/next_tick.js:139:11)
        at process._tickCallback (internal/process/next_tick.js:181:9)

2) routes : posts POST /topics/:topicId/posts/create should create a new post and redirect
  Message:
    Expected null not to be null.
  Stack:
    Error: Expected null not to be null.
        at <Jasmine>
        at Post.findOne.then (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/spec/integration/posts_spec.js:75:30)
        at tryCatcher (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/util.js:16:23)
        at Promise._settlePromiseFromHandler (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:512:31)
        at Promise._settlePromise (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:569:18)
        at Promise._settlePromise0 (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:614:10)
        at Promise._settlePromises (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:694:18)
        at _drainQueueStep (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:138:12)
        at _drainQueue (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:131:9)
        at Async._drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:147:5)
        at Immediate.Async.drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:17:14)
        at runCallback (timers.js:810:20)
        at tryOnImmediate (timers.js:768:5)
        at processImmediate [as _immediateCallback] (timers.js:745:5)

3) routes : posts POST /topics/:topicId/posts/:id/destroy should delete the post with the associated ID
  Message:
    RangeError: Invalid status code: /topics/1/posts/1
  Stack:
        at <Jasmine>
        at ServerResponse.writeHead (_http_server.js:199:11)
        at ServerResponse.writeHead (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/on-headers/index.js:55:19)
        at ServerResponse._implicitHeader (_http_server.js:190:8)
        at write_ (_http_outgoing.js:632:9)
        at ServerResponse.end (_http_outgoing.js:751:5)
        at ServerResponse.end (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/express-session/index.js:354:19)
        at ServerResponse.redirect (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/express/lib/response.js:947:10)
        at postQueries.deletePost (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/src/controllers/postController.js:69:21)
        at Post.destroy.then.catch (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/src/db/queries.posts.js:33:11)
        at tryCatcher (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/util.js:16:23)
        at Promise._settlePromiseFromHandler (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:512:31)
        at Promise._settlePromise (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:569:18)
        at Promise._settlePromise0 (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:614:10)
        at Promise._settlePromises (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:690:18)
        at _drainQueueStep (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:138:12)
        at _drainQueue (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:131:9)
        at Async._drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:147:5)
        at Immediate.Async.drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:17:14)
        at runCallback (timers.js:810:20)
        at tryOnImmediate (timers.js:768:5)
        at processImmediate [as _immediateCallback] (timers.js:745:5)
  Message:
    Failed: Invalid status code: /topics/1/posts/1
  Stack:
        at <Jasmine>
        at ServerResponse.writeHead (_http_server.js:199:11)
        at ServerResponse.writeHead (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/on-headers/index.js:55:19)
        at ServerResponse._implicitHeader (_http_server.js:190:8)
        at write_ (_http_outgoing.js:632:9)
        at ServerResponse.end (_http_outgoing.js:751:5)
        at ServerResponse.end (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/express-session/index.js:354:19)
        at ServerResponse.redirect (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/express/lib/response.js:947:10)
        at postQueries.deletePost (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/src/controllers/postController.js:69:21)
        at Post.destroy.then.catch (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/src/db/queries.posts.js:33:11)
        at tryCatcher (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/util.js:16:23)
        at Promise._settlePromiseFromHandler (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:512:31)
        at Promise._settlePromise (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:569:18)
        at Promise._settlePromise0 (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:614:10)
        at Promise._settlePromises (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:690:18)
        at _drainQueueStep (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:138:12)
        at _drainQueue (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:131:9)
        at Async._drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:147:5)
        at Immediate.Async.drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:17:14)
        at runCallback (timers.js:810:20)
        at tryOnImmediate (timers.js:768:5)
        at processImmediate [as _immediateCallback] (timers.js:745:5)

4) routes : posts GET /topics/:topicId/posts/:id/edit should render a view with an edit post form
  Message:
    Expected 'Not Found. Redirecting to /' to contain 'Edit Post'.
  Stack:
    Error: Expected 'Not Found. Redirecting to /' to contain 'Edit Post'.
        at <Jasmine>
        at Request.request.get [as _callback] (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/spec/integration/posts_spec.js:148:23)
        at Request.self.callback (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:186:22)
        at emitTwo (events.js:126:13)
        at Request.emit (events.js:214:7)
        at Request.<anonymous> (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:1163:10)
        at emitOne (events.js:116:13)
        at Request.emit (events.js:211:7)
        at IncomingMessage.<anonymous> (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:1085:12)
        at Object.onceWrapper (events.js:313:30)
        at emitNone (events.js:111:20)
        at IncomingMessage.emit (events.js:208:7)
        at endReadableNT (_stream_readable.js:1064:12)
        at _combinedTickCallback (internal/process/next_tick.js:139:11)
        at process._tickCallback (internal/process/next_tick.js:181:9)
  Message:
    Expected 'Not Found. Redirecting to /' to contain 'Snowball Fighting'.
  Stack:
    Error: Expected 'Not Found. Redirecting to /' to contain 'Snowball Fighting'.
        at <Jasmine>
        at Request.request.get [as _callback] (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/spec/integration/posts_spec.js:149:23)
        at Request.self.callback (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:186:22)
        at emitTwo (events.js:126:13)
        at Request.emit (events.js:214:7)
        at Request.<anonymous> (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:1163:10)
        at emitOne (events.js:116:13)
        at Request.emit (events.js:211:7)
        at IncomingMessage.<anonymous> (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:1085:12)
        at Object.onceWrapper (events.js:313:30)
        at emitNone (events.js:111:20)
        at IncomingMessage.emit (events.js:208:7)
        at endReadableNT (_stream_readable.js:1064:12)
        at _combinedTickCallback (internal/process/next_tick.js:139:11)
        at process._tickCallback (internal/process/next_tick.js:181:9)

5) routes : posts POST /topics/:topicId/posts/:id/update should return a status code 302
  Message:
    Expected 500 to be 302.
  Stack:
    Error: Expected 500 to be 302.
        at <Jasmine>
        at Request.request.post [as _callback] (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/spec/integration/posts_spec.js:165:33)
        at Request.self.callback (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:186:22)
        at emitTwo (events.js:126:13)
        at Request.emit (events.js:214:7)
        at Request.<anonymous> (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:1163:10)
        at emitOne (events.js:116:13)
        at Request.emit (events.js:211:7)
        at IncomingMessage.<anonymous> (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:1085:12)
        at Object.onceWrapper (events.js:313:30)
        at emitNone (events.js:111:20)
        at IncomingMessage.emit (events.js:208:7)
        at endReadableNT (_stream_readable.js:1064:12)
        at _combinedTickCallback (internal/process/next_tick.js:139:11)
        at process._tickCallback (internal/process/next_tick.js:181:9)

6) routes : posts POST /topics/:topicId/posts/:id/update should update the post with the given values
  Message:
    Expected 'Snowball Fighting' to be 'Snowman Building Competition'.
  Stack:
    Error: Expected 'Snowball Fighting' to be 'Snowman Building Competition'.
        at <Jasmine>
        at Post.findOne.then (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/spec/integration/posts_spec.js:187:33)
        at tryCatcher (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/util.js:16:23)
        at Promise._settlePromiseFromHandler (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:512:31)
        at Promise._settlePromise (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:569:18)
        at Promise._settlePromise0 (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:614:10)
        at Promise._settlePromises (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:694:18)
        at _drainQueueStep (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:138:12)
        at _drainQueue (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:131:9)
        at Async._drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:147:5)
        at Immediate.Async.drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:17:14)
        at runCallback (timers.js:810:20)
        at tryOnImmediate (timers.js:768:5)
        at processImmediate [as _immediateCallback] (timers.js:745:5)

7) routes : topics member user performing CRUD actions for Topic POST /topics/create should create a new topic and redirect
  Message:
    Expected [object SequelizeInstance:Topic] to be null.
  Stack:
    Error: Expected [object SequelizeInstance:Topic] to be null.
        at <Jasmine>
        at Topic.findOne.then (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/spec/integration/topics_spec.js:225:33)
        at tryCatcher (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/util.js:16:23)
        at Promise._settlePromiseFromHandler (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:512:31)
        at Promise._settlePromise (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:569:18)
        at Promise._settlePromise0 (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:614:10)
        at Promise._settlePromises (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/promise.js:694:18)
        at _drainQueueStep (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:138:12)
        at _drainQueue (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:131:9)
        at Async._drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:147:5)
        at Immediate.Async.drainQueues (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/bluebird/js/release/async.js:17:14)
        at runCallback (timers.js:810:20)
        at tryOnImmediate (timers.js:768:5)
        at processImmediate [as _immediateCallback] (timers.js:745:5)

8) routes : topics member user performing CRUD actions for Topic GET /topics/:id/edit should render a view with an edit topic form
  Message:
    Expected '<!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/application.css">
      </head>
      <body>
        
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="/">Bloccit</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link" href="/topics">Topics</a>
              </li>
              <li class="nav-item">
                <a cl ... to contain 'Edit Topic'.
  Stack:
    Error: Expected '<!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/application.css">
      </head>
      <body>
        
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="/">Bloccit</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link" href="/topics">Topics</a>
              </li>
              <li class="nav-item">
                <a cl ... to contain 'Edit Topic'.
        at <Jasmine>
        at Request.request.get [as _callback] (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/spec/integration/topics_spec.js:272:28)
        at Request.self.callback (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:186:22)
        at emitTwo (events.js:126:13)
        at Request.emit (events.js:214:7)
        at Request.<anonymous> (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:1163:10)
        at emitOne (events.js:116:13)
        at Request.emit (events.js:211:7)
        at IncomingMessage.<anonymous> (/Users/michellebeauregard/Desktop/Sites/bloc/bloccit/node_modules/request/request.js:1085:12)
        at Object.onceWrapper (events.js:313:30)
        at emitNone (events.js:111:20)
        at IncomingMessage.emit (events.js:208:7)
        at endReadableNT (_stream_readable.js:1064:12)
        at _combinedTickCallback (internal/process/next_tick.js:139:11)
        at process._tickCallback (internal/process/next_tick.js:181:9)

36 specs, 8 failures
Finished in 3.243 seconds
